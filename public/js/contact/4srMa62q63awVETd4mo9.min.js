

function setCookie(name, value, daysToExpire) {
    var expires = "";
    
    if (daysToExpire) {
        var date = new Date();
        date.setTime(date.getTime() + (daysToExpire * 5 * 60 * 1000));
        expires = "; expires=" + date.toUTCString();
    }
    
    document.cookie = name + "=" + value + expires + "; path=/";
};

// Function to get a specific cookie by name
function getCookie(cookieName) {
    var name = cookieName + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var cookieArray = decodedCookie.split(';');

    for (var i = 0; i < cookieArray.length; i++) {
        var cookie = cookieArray[i].trim();
        if (cookie.indexOf(name) === 0) {
            return cookie.substring(name.length, cookie.length);
        }
    }

    return null; // Return null if the cookie is not found
};

if (getCookie('_oCddWSYLEGqG')) {

    document.getElementById("contact_submit").disabled = true;
    document.getElementById('contact_submit').style.display = 'none';
    document.getElementById('contact_submit_done').style.display = 'inline-block';
    document.getElementById("contact_submit_done").disabled = false;
} else {
    document.getElementById("contact_submit_done").disabled = true;
    document.getElementById('contact_submit_done').style.display = 'none';
    document.getElementById('contact_submit').style.display = 'inline-block';
    document.getElementById("contact_submit").disabled = false;
};


$('#contact-desktop-form').on('submit', function(e){
    e.preventDefault();

    document.getElementById("contact_submit").disabled = true;
    document.getElementById('contact_submit').style.display = 'none';
    document.getElementById('contact_submit_verifying').style.display = 'inline-block';

    var formData = new FormData(this);

    $.ajaxSetup({
        headers: {
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content'),
            'authkey': 'YOUR_SECRET_KEY',
        }
    });

    $.ajax({
        type:'POST',
        headers: //---set the headers for cross-origin policies between domains
        {
            'X-CSRF-TOKEN': $('meta[name="XSRF-TOKEN"]').attr('content'),
            'Access-Control-Allow-Origin': 'https://esnaad.com/en/contact-form-post'
        },
        url: "/en/contact-form-post",
        data: formData,
        processData: false,
        contentType: false,
        success:function(data) 
        {
            if($.isEmptyObject(data.error)){ //---if success
                setCookie("_oCddWSYLEGqG", true, 1);
                document.getElementById("contact_submit").disabled = true;
                document.getElementById('contact_submit').style.display = 'none';
                document.getElementById('contact_submit_done').style.display = 'inline-block';
                document.getElementById("contact_submit_done").disabled = false;
                $('#contact_submit_verifying').show();
                document.location.href = '/en/subscription/thanks';
            }else{
                printErrorMsg(data.error);//---show error
            }
        }
    });

});

